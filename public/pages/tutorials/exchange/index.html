<!DOCTYPE html>
<html lang="en">


    <head>

        <title>DataVisualisations</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/styles/a11y-dark.min.css" integrity="sha512-1rzCaYWsg3l6uKvGbUT6rAZFOcVn0zeXAFlZudsnj8k2xcrU5asL8jfJUEijV9GPYMh0GnPToeCTJj6RXQnA8g==" crossorigin="anonymous" />
        <link rel="stylesheet" href="../../../css/colors.css" type="text/css">
        <link rel="stylesheet" href="../../../css/main.css" type="text/css">

        <script src="https://kit.fontawesome.com/4ebb081c7a.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" defer integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" defer integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/highlight.min.js" integrity="sha512-d00ajEME7cZhepRqSIVsQVGDJBdZlfHyQLNC6tZXYKTG7iwcF8nhlFuppanz8hYgXr8VvlfKh4gLC25ud3c90A==" crossorigin="anonymous"></script>
        <script>window.hljs.highlightAll();</script>
    </head>




    <body>

        <!-- nav bar start  -->


        <nav class="navbar navbar-expand-lg ml-auto navbar-dark bg-primary">

            <a class="navbar-brand" href="/">
                <img src="../../../image/logo.svg" width="30" height="30" class="d-inline-block align-top" alt="logo">
                DataVisualisations
            </a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse " id="navbarNavDropdown">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="./">Home </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="../../../pages/visualizations/earthquake/">earthquake</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="../../../pages/visualizations/exchange/">exchange</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="../../../pages/visualizations/iss/">iss</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="../../../pages/visualizations/marketcap/">marketcap </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="../../../pages/visualizations/quality/">quality</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="../../../pages/visualizations/weather/">weather</a>
                    </li>


                    <li class="nav-item dropdown active">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Tutorials
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="../../../pages/tutorials/earthquake/">earthquake tutorial</a>
                            <a class="dropdown-item" href="../../../pages/tutorials/exchange/">exchange tutorial</a>
                            <a class="dropdown-item" href="../../../pages/tutorials/iss/">iss tutorial</a>
                            <a class="dropdown-item" href="../../../pages/tutorials/marketcap/">marketcap tutorial</a>
                            <a class="dropdown-item" href="../../../pages/tutorials/quality/">quality tutorial</a>
                            <a class="dropdown-item" href="../../../pages/tutorials/weather/">weather tutorial</a>
                        </div>
                    </li>
                </ul>


            </div>


        </nav>

        <!-- nav bar end  -->





        <div class="container-fluid layout-container-fluid rounded"> <!-- layout-container-fluid -->


            <div class="row no-gutters">  <!-- Row 1  -->


                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"> <!-- col 1  -->

                    <div class="content-container-fluid">
                        <div class="card text-white bg-primary">
                            <div class="card-header"><i class="fas fa-graduation-cap"></i> Tutorial for Exchange Visualisation</div>
                            <div class="card-body">






                                <!-- Page content start  -->

                                <div class="container-fluid">

                                    <div class="row no-gutters">  <!-- Row   -->


                                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"> <!-- col   -->

                                            <div class="container-fluid">


                                                <h5 class="card-title">Tutorial Sections</h5>

                                                <ol>
                                                    <li>Getting the data from the API</li>
                                                    <li>Processing the information</li>
                                                    <li>Displaying in the visualisation</li>
                                                    <li>Further reading links</li>
                                                </ol>


                                            </div>

                                        </div>  <!-- col 1  -->


                                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"> <!-- col 2  -->

                                            <div class="container-fluid">

                                                <img src="./image.png" class="rounded w-100" alt="Computer code">


                                            </div>

                                        </div> <!-- col 2  -->


                                    </div> <!-- Row   -->

                                </div>









                                <div class="divider my-4"></div>



                                <h5 class="card-title"><i class="fas fa-cloud-download-alt"></i> Getting the data from the API</h5>

                                <p class="card-text">
                                    The API used for this visualisation is the <a href="https://exchangeratesapi.io/">Exchange Rates Api</a>. This API provides a wide range of historical data on many currencies.
                                    This tutorial assumes that the user is fluent in HTML, CSS, Javascript and has at least some knowledge of basic DOM manipulation using <a href="https://jquery.com/">JQuery</a>.
                                    To retrieve the data from the API we will be using a javascript library that simplifies the process called <a href="https://www.npmjs.com/package/axios">AXIOS</a>. 
                                    We will be using this library to make all of our requests.


                                </p>

                                <p class="card-text">
                                    Add the following elements to the body of your HTML page
                                </p>

                                <pre style="color: white; background: #2b2b2b;" > index.html - &lt;body&gt;
                                     <code class="javascript">
                                    &lt;div class="currencySelectContainer"&gt;
                                    &lt;p&gt; Base Currency &lt;/p&gt;
                                    &lt;select name="currency1" id="currency1"&gt;
                                    &lt;/select&gt;
                                    &lt;p&gt; Secondary Currency &lt;/p&gt;
                                    &lt;select name="currency2" id="currency2"&gt;
                                    
                                    &lt;/select&gt;
                                    &lt;p&gt; Select a date: &lt;/p&gt;
                                    &lt;input id="el"&gt;
                                
                                
                                
                                &lt;/div&gt; 
                                    &lt;canvas id="exchangeChart"&gt;&lt;/canvas&gt; 
                                </code>

                                </pre>


                                <p class="card-text">
                                    The first function we will create is the GetCurrencyList function, this will be used to get a list of all the valid currencies from the API.
                                    After the response has been recieved as seen in the code below, we then loop through each currency and add it to the selection boxes called currency 1 & 2.


                                </p>


                                <pre style="color: white; background: #2b2b2b;" > getCurrencyList()
                                    <code class="javascript">
                                        try {
                                            let url = "https://api.exchangeratesapi.io/latest?base=USD";
                                            let chartElement = document.getElementById('exchangeChart').getContext('2d');
                                            chartElement.font = "30px Roboto";
                                            chartElement.fillStyle = "white";
                                            chartElement.fillText("Loading data...", 10, 50);
                                            let res = await axios.get(url);
                                            let currencies = Object.keys(res.data.rates);            
                                            let currency1 = document.getElementById('currency1');
                                            let currency2 = document.getElementById('currency2');
                                            currencies.forEach(currency => {
                                                let opt = "&lt;option value="${currency}"&gt;${currency}&lt;/option&gt;";
                                                    currency1.innerHTML = currency1.innerHTML + opt;
                                                    currency2.innerHTML = currency2.innerHTML + opt;
                                            });
                                            currency1.value = "USD";
                                            currency2.value = "GBP";
                                        }
                                        catch (error){
                                            console.log(error);
                                        }
            
                                </code></pre>


                                
                                <p class="card-text">
                                    The next function to create is OnCurrencyChange(), 
                                    this function is responsible for getting the user selected currency when it changes. 
                                    The final part of the function that calls another another function called 
                                    populateDataset() will be responsible for getting all of the currency data and displaying it on screen.
                                </p>


                                <pre style="color: white; background: #2b2b2b;"> OnCurrencyChange()
                                    <code class="javascript">
                                        let currency1 = document.getElementById('currency1');
                                        let currency2 = document.getElementById('currency2');
                                        console.log(currency1.value);
                                        console.log(currency2.value);
                                        populateDataset(); 
                                </code></pre>

                                <p class="card-text">
                                    After you successfully created the OnCurrencyChange() function, 
                                    the next function to create is the populateDataset() function. As mentioned previouly, 
                                    this will be responsible for retrieving the data from the API. As the function is rather large,
                                    we will break it down into sections so it is easier to understand and explain
                                </p>

                                <p class="card-text">
                                    The code below will run in a try catch block as we're retrieving data therefore there maybe complications.
                                    The first part of this function will get the values from the selection boxes, 
                                    then uses those values to make a request that will return 
                                    the historical data of currency 2 using currency 1 as the base currency.
                                </p>
                                <pre style="color: white; background: #2b2b2b;"> populateDataset()
                                    <code class="javascript">
                                        try
                                        {
                                            let BaseCurrency = document.getElementById('currency1');
                                            let CompCurrency = document.getElementById('currency2');
                                        
                                    
                                            let url = `https://api.exchangeratesapi.io/history?start_at=${startdate || "2021-01-01"}&end_at=${enddate || "2021-02-20"}&base=${BaseCurrency.value || 'USD'}&symbols=${CompCurrency.value|| 'GBP'}`;
                                            console.log(url);
                                            let chartElement = document.getElementById('exchangeChart').getContext('2d');
                                            chartElement.font = "30px Roboto";
                                            chartElement.fillStyle = "white";
                                            chartElement.fillText("Loading data...", 10, 50);
                                    
                                    
                                            let response = await axios.get(url);
                                    
                                </code></pre>

                                <h5 class="card-title"><i class="fas fa-wrench"></i> Processing the information</h5>

                                <p class="card-text">
                                    After you have recieve the data fron the API, 
                                    you will notice that the dates aren't in order within in the array.
                                    To fix this we will implement a piece of code 
                                    that will sort the sort the array by date in ascending order
                                </p>

                                <pre style="color: white; background: #2b2b2b;"> populateDataset()
                                    <code class="javascript">
                                    const sortedRates =[];
                                    for (const [key, value] of Object.entries(rates)) {
                                        let newobj = { [key] :`${Object.values(value)}`};
                                        sortedRates.push(newobj);
                                    }
                                    const newSortedRates = sortedRates.sort(function(a,b){
                                        let date1 = new Date(Object.keys(a)[0]);
                                        let date2 = new Date(Object.keys(b)[0]);
                                        return date1.getDate() - date2.getDate()
                                        });
                                    console.log(newSortedRates);
                                    const Dates =  []
                                    const DateValuesArr = [];
                                    newSortedRates.forEach(element => {
                                        DateValuesArr.push((Object.values(element)[0]));
                                    });
                                    newSortedRates.forEach(element => {
                                        Dates.push((Object.keys(element)[0].toString()));
                                    });
                                </code></pre>

                                <div class="divider my-4"></div>






                                <h5 class="card-title"><i class="fas fa-desktop"></i> Displaying in the visualisation</h5>

                                <p class="card-text">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit,
                                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                    Ut enim ad minim veniam,
                                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                                    Excepteur sint occaecat cupidatat non proident,
                                    sunt in culpa qui officia deserunt mollit anim id est laborum.
                                </p>

                                <pre><code class="javascript">
                                    const t = i / speed;
                                    keyframes.push([
                                        new Date(ka * (1 - t) + kb * t),
                                        rank(name => (a.get(name) || 0) * (1 - t) + (b.get(name) || 0) * t)
                                    ]);
                                </code></pre>

                                <div class="divider my-4"></div>






                                <h5 class="card-title"><i class="fas fa-book-reader"></i> Further Reading links</h5>

                                <ul>
                                    <li><a href="https://www.google.com/" target="_blank" class="text-decoration-none font-weight-bold text-white"><i class="fas fa-link"></i> API docs, Library Docs</a></li>
                                    <li><a href="https://www.google.com/" target="_blank" class="text-decoration-none font-weight-bold text-white"><i class="fas fa-link"></i> Library Docs</a></li>
                                    <li><a href="https://www.google.com/" target="_blank" class="text-decoration-none font-weight-bold text-white"><i class="fas fa-link"></i> About the data</a></li>
                                </ul>

                                <div class="divider my-4"></div>




                                <!-- Page content end  -->


                            </div>
                        </div>
                    </div>

                </div> <!-- col 1  -->


            </div> <!-- Row 1  -->





        </div> <!-- layout-container-fluid  -->




    </body>


</html>