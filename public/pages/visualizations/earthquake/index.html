<!DOCTYPE html>
<html lang="en">


    <head>

        <title>DataVisualisations</title>

        <style>
        #map {
            height: 60%;
            width: 60%;
            position:inherit
        }

        html,
        body {
            height: 97%;
            margin: 2%;
            padding: 0;
        }

        #other {
            height: auto;
            width: 50%;
        }
        </style>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
        <link rel="stylesheet" href="css/colors.css" type="text/css">
        <link rel="stylesheet" href="css/main.css" type="text/css">

        <script src="https://kit.fontawesome.com/4ebb081c7a.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" defer integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" defer integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
        <script src="javascript/map1.js" defer></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>




    <body>


        <nav class="navbar navbar-dark bg-primary">
            <a class="navbar-brand" href="index.html">
                <img src="./image/logo.svg" width="30" height="30" class="d-inline-block align-top" alt="logo">
                DataVisualisations
            </a>
            <a class="navbar-brand" href="weather.html">
                <img src="./image/logo.svg" width="30" height="30" class="d-inline-block align-top" alt="logo">
                The Eartquake API
            </a>
        </nav>


        <div class="container-fluid layout-container-fluid rounded"> <!-- layout-container-fluid -->




            <div class="row no-gutters">  <!-- Row 1  -->


                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"> <!-- col 1  -->

                    <div class="content-container-fluid">
                        <div class="card text-white bg-primary">
                            <div class="card-header"><i class="fas fa-globe-americas"></i> Earthquake Map Data 1</div>
                            <div class="card-body">

                                <p class="card-text">Below is an example data visualisation
                                    <a href="https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_day.geojson" class="badge badge-info">Data Source</a>
                                    <a href="https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.php" class="badge badge-warning">View All Feeds</a>
                                </p>

                                <hr class="my-2">
                                <button type="button" id="map1Button" class="btn btn-dark btn-lg btn-block">Get Earthquake Data</button>
                                <hr class="my-2">

                                <div id="info"></div>
                                <div id="map1" class="rounded"></div>

                            </div>
                        </div>
                    </div>

                </div> <!-- col 1  -->


            </div> <!-- Row 1  -->




            <div class="row no-gutters">  <!-- Row 2  -->


                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"> <!-- col 1  -->

                    <div class="content-container-fluid">
                        <div class="card text-white bg-primary">
                            <div class="card-header"><i class="fas fa-th"></i> Earthquake</div>
                            <div class="card-body">
                                <!-- <p class="card-text">A bootstrap skeleton for layouts can be found <a href="skeleton.html" class="card-link">here</a> </p> -->
                            </div>
                        </div>
                    </div>

                </div> <!-- col 1  -->


            </div> <!-- Row 2  -->




        </div> <!-- layout-container-fluid  -->

        <div id="info"></div>
    </div>
    <div id="map"></div>
    <script>
        var map;
         // window.location.href;
         var theurl = window.location.toString();
        //initMap() called when Google Maps API code is loaded - when web page is opened/refreshed 
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 2,
                center: new google.maps.LatLng(2.8, -187.3), // Center Map. Set this to any location that you like
                mapTypeId: 'terrain' // can be any valid type
            });
            google.maps.event.trigger(map, 'resize');
        }

        var thelocation;
        var titleName;
        $(document).ready(function () {

            $('#map1Button').click(function () {
                // Set Google map  to its start state
                map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 2,
                    center: new google.maps.LatLng(2.8, -187.3), // Center Map. Set this to any location that you like
                    mapTypeId: 'terrain' // can be any valid type
                });
                // The following uses JQuery library
                $.ajax({
                    // The URL of the specific data required
                    url: "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_day.geojson",

                    // Called if there is a problem loading the data
                    error: function () {
                        $('#info').html('<p>An error has occurred</p>');
                    },

                    // Called when the data has succesfully loaded
                    success: function (data) {
                        $.each(data.features, function (key, val) {
                            // Get the lat and lng data for use in the markers
                            var coords = val.geometry.coordinates;
                            var latLng = new google.maps.LatLng(coords[1], coords[0]);
                            // Now create a new marker on the map
                            var marker = new google.maps.Marker({
                                position: latLng,
                                map: map
                            });
                        });

                    }
                });
            });
        });
    </script>

        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAPKZPA5U02v5Ag20p35PUos8uRoN6KvM8&callback=initMap">
        </script>
    </body>


</html>